2010-05-25(火)  Tachibana

	* dis version 3.16 として公開。

	* ドキュメント類修正、src/ports/ports.txt 新規作成。


2010-05-23(日)  Tachibana

	* *.[ch]: 移植時にエラーや警告が出ないように調整。明示的なキャス
	トや #include <〜.h> の追加など。

	* Makefile, fpconv.c: 従来は printf() が "%Lg"(long dobule) に対
	応していれば HAVE_LDBL_DOPRNT を定義していたが、逆にして対応して
	いない場合に NO_PRINTF_LDBL を定義するようにした。

	過去ログ見てたら
	> -DNO_LDBL_DOPRNT を -DHAVE_LDBL_DOPRNT に変更.
	なんてのがあった……。

	* labelfile.c (get_line): getline から名称変更。glibc に同名関数
	があるため。

	* labelfile.h (getline, COMMENT_CHAR, SYMBOL_TERMINATE_STRING):
	宣言と定義を削除。

	* main.c (loadfile): サイズが 0〜1 バイトで、拡張子が .r 以外の
	ファイルを指定した時にきちんとエラーに飛ぶようにした(従来は読み
	込んでいないバッファを参照していたが、その後の読み込みでエラーに
	飛ぶので結果的にはセーフ)。

	* (loadfile): open() の第3引数 S_IRUSR を削除(O_CREAT 時にだけ必
	要な引数)。該当部分の OSKDIS 用コードを削除して統合。


2010-05-17(月)  Tachibana

	* src/global.h: VOLATILE の定義を削除。

	* src/etc.[ch] (err): 上記変更に対応。代わりに __attribute__
	((noreturn)) を追加。

	* src/table.c (read_tablefile): コメント行の記号に「;」を追加。


2010-05-16(日)  Tachibana

	* src/estruct.h (xheader, os9header): コンパイル環境によっては構
	造体に余計なパディングが入ってしまい、正しく読み取れない不具合を
	修正(gcc 拡張機能を使用)。

	* (zheader): main.c から移動。

	* (ctimez): ctime() がエラー(NULL)になった時に不正なアドレスに書
	き込んでいたのを修正し、"(invalid time)" を返すようにした。

	PD libc では常に有効なアドレスが返るが、規格上はエラー時に NULL
	が返る。コンパイル環境によっては不正なタイムスタンプの場合などに
	問題となる。

	* src/include.c (search_and_readfile): dis_inc と include を初期
	化しないまま参照することがある不具合を修正。

	* src/main.c: QUICK_YES_NO 定義時のみ getch() を宣言するようにし
	た。また __HUMAN68K__ 定義時に conio.h、未定義なら curses.h を読
	み込むようにした(従来は __FreeBSD__ 定義時に curses.h)。

	* (print_title): Cygwin/MinGW/Linux 対応。処理が長くなってきたの
	で OSKDIS の表示形式を調整。

	* src/option.c (usage): ヘルプを標準エラー出力ではなく標準出力に
	表示するようにした。

	* etc.h: __mc68000__ 定義時に __BIG_ENDIAN__ を定義するようにし
	た。以後は __BIG_ENDIAN__ の有無だけを見る。ほとんどの環境で
	Makefile でエンディアンを定義する必要がなくなったはず。

	* etc.h (peekw, peekl), main.c (loadfile): 上記変更に対応。


2006-03-18(土)  Tachibana Eriko  <eririn@spica.freemail.ne.jp>

	* dis version 3.15 として公開。


2006-03-15(水)  Tachibana Eriko  <eririn@spica.freemail.ne.jp>

	* src/disasm.c (op04): -m680x0 指定時に link.w 命令を逆アセンブ
	ルすると、68000 命令なのに .cpu 68020 が出力されてしまう不具合を
	修正。

	* README.DOC: ドキュメント修正。


2000-05-18(木)  Tachibana Eriko  <eririn@spica.freemail.ne.jp>

	* dis version 3.14 released.

	* analyze.c (analyze): 一昨日の変更が期待通りに動作していなかっ
	たのを修正.

	* disasm.c (op0f): fbra が条件分岐として扱われていた不具合を修正
	(BCCOP から JMPOP に変更).


2000-05-16(火)  Tachibana Eriko  <eririn@spica.freemail.ne.jp>

	* analyze.c (analyze): JMPOP/JSROP でメモリ間接アドレッシングの
	ときは分岐先の解析を行わないようにした(JMPOP は絶対ショートも).
	間接参照先のラベルを登録するようにした.

	* 上記変更によりプログラム領域の検索中にバスエラーが発生すること
	がある不具合を修正. ただし、対症療法なので、もしかしたらまだ発生
	することがあるかも知れない.

	* disasm.c (setEA): bd を省略すると (,d0.l) というように出力して
	しまう不具合を修正.


version 3.13
-a--rw-   114214 1999-09-01 00:04:32 dis.x

	その他:

	環境変数 dis_header、dis_sxmac に空文字列が指定されていた場合は
	無指定と見なすようにした.

	generate.c の MIN_BIT(x) のマクロ定義を (((x) ^ ((x) - 1)) & (x))
	から ((x) & -(x)) に変更.

	LIBC をぱっちその１４に、bison を version 1.27 human68k-1.1 に変
	更.


version 3.12
-a--rw-   114212 1999-04-25 04:05:32 dis.x

	出力ファイル関係:

	"sr" が "ccr" になってしまう不具合を修正.


version 3.11
-a--rw-   114282 1999-01-03 01:35:18 dis.x

	オプション関係:

	-v --exclude-iocscall-mac でバスエラーになる不具合を修正.

	出力ファイル関係:

	-M で IOCS コールに(moveq の)コメントが付く不具合を修正.


version 3.10
-a--rw-   114336 1998-12-23 03:02:24 dis.x

	本日の目玉:

	FreeBSD 上で動作するようにした(リトルエンディアンも問題なし!!).

	オプション関係:

	--{in,ex}clude-fefunc-mac オプションを指定するとエラーになってい
	た不具合を修正.

	入力ファイル関係:

	$dis_sxmac 読み込み時にメモリを破壊する不具合を修正.

	アドレス境界情報のシンボル(*filename*)を無視するようにした.

	出力ファイル関係:

	-A によるコメントが cmpi.w 等に付かなかった不具合を修正.
	moveq.l にもコメントを付けるようにした.

	.data セクションがない場合に -S で正しくファイルが作成されなかっ
	た不具合を修正.

	-A で adda/suba を常に add/sub と表記するようにした. addq/subq
	への最適化を防止する為、必要ならサイズを付ける. addi/subi も演算
	先がデータレジスタでなければ同様に処理する.

	-v -B で bra の後に空行が入らない不具合を修正.

	--exclude-xxx-mac 指定時にヘッダ部分に .include (null) と出力さ
	れてしまったので、何も出力しないようにした.

	68030 の pmove、68040/68060 の plush や、MMU レジスタ bad0、bac0、
	mmusr を使用した命令が正しく出力できなくなっていた不具合を修正.

	その他細かい不具合を修正.

	-x で相対オフセットテーブルにもコメントを付けるようにした.

	FreeBSD 版では fstat() で出力先の同一検査を行うようにした.

	解析関係:

	chk2 及び cmp2 のアドレッシングモードが全てとなっていたのを制御
	モードに修正.

	-m68000 の場合にも tst 命令で 68020 以降で拡張されたアドレッシン
	グを受け付けていた不具合を修正.

	その他:

	いろいろと高速化(したはず…).

	不要になっていた stack.s を削除.
	Makefile.bsd を追加.


version 3.00
-a--rw-   116854 1998-10-17 00:38:08 dis.x

	オプション関係:

	--include-XXX-mac=<file> 及び --exclude-XXX-mac オプション追加.
	XXX は doscall、iocscall、fefunc のいずれか.

	--header=<file> オプション追加.

	-mcpu32 オプション追加.

	出力ファイル関係:

	テーブル末尾のラベルが二重に出力される不具合を修正.

	同一アドレスに対し複数のセクションにラベルが定義されていた場合に
	最後のセクションに全て出力されていた不具合を修正.

	stack セクションの出力に対応(シンボルテーブルが存在する場合のみ).

	テーブル関係:

	テーブルの式に 0x から始まる 16 進数を記述できるようにした.

	解析関係:

	解析中にスタック溢れを監視してバスエラーが起きる前に強制終了する
	ようにした.

	CPU32 の命令セットに対応. ただし .cpu の切り換えは行わない.

	その他:

	ソースコードの大幅改修.

	ソースコードデバッガ情報は全く再現できなかった. この事をドキュメ
	ントに加筆.

	バージョンを 3.00 にして開発終了とする.


version 2.85
-a--rw-   118966 1998-07-17 22:50:38 dis.x

	オプション関係:

	-z オプション指定時にファイル形式エラーになる不具合を修正. また、
	アドレスの指定に $ や 0x を付けられるようにした(付けなくても 16 
	進数として扱いますが).

	サブルーチンコール命令の直後に引数を置くプログラムを解析する為の
	-G オプション作成.

	出力ファイル関係:

	ファイルが存在していた場合、r(rename) でファイル名を変更出来るよ
	うにした.

	二バイト半角文字の扱いを修正.

	解析関係:

	テーブル終了アドレスのラベル属性が消えてしまう不具合を修正.

	その他:

	-o オプションの説明を修正(デフォルトは 60 で、バイト数ではなく桁
	数だった).

	実行ファイルの読み込みバッファを 16 バイト余分に確保するようにし
	た.

	ドキュメント修正.


version 2.83
-a--rw-   118402 1998-06-03 01:01:46 dis.x

	オプション関係:

	外部定義シンボルの出力を指定する -s[num] オプション作成. -s2 な
	ら .xdef も使いシンボルテーブルをほぼ完全に再現する. 従来の -s
	オプションから機能が変わったので注意して下さい.

	-m68008 を -m68000 と等価に扱うようにした.
	隠しオプション --x、--r、--z 作成.

	入力ファイル関係:

	X/Z 形式実行ファイルを、先頭の 2 バイトの内容で判別するようにし
	た(従来は拡張子).

	シンボル関係の各種バッファを動的に確保するようにした. 定義数の上
	限がなくなったので -s オプションを削除し、別の機能を割り当てた.
	シンボルが多すぎるとメモリを破壊する不具合を修正.
	未定義のシンボル属性を警告するようにした.

	出力ファイル関係:

	定数の外部定義に -C、-Z オプションが効くようにした. -s2 指定時は
	外部定義のラベルも .xref で出力するようにした.

	拡張精度実数値を実数表記で出力する場合、もし正確に変換できなかっ
	たら内部表記で出力するようにした.

	標準出力へ書き込む時は自動的に -q を指定するようにした.

	解析関係:

	BSS 以降もアドレス依存データや 0x4e75(rts) を検索していた不具合
	を修正. BSS が細切れになるバグが直った筈.

	-j オプション指定時は、奇数アドレスへの分岐を正しい命令として認
	めるようにした(ただし分岐先はプログラムと見なさない).

	末尾のラベルが削除されてしまい、不正なメモリを参照してソースコー
	ドを出力し続けてしまう不具合を修正.

	テーブル関係:

	浮動小数点を出力する命令 .dc.s、.dc.d、.dc.x、.dc.p を新設. ただ
	しオペランド表現式は記述できず、pc の値を出力するのみ.

	byte、ascii、asciiz、lascii 以外の命令を BSS 内で使用できるよう
	にした(何に使うのか知らないけど…).

	各種バッファを動的に確保するようにした(定義数の上限がなくなった).
	定義が多すぎるとメモリを破壊する不具合を修正.

	ソースコード関係:

	-DNO_LDBL_DOPRNT を -DHAVE_LDBL_DOPRNT に変更.
	-DHAVE_STRTOX を追加.

	他は多すぎるので省略.

	その他:

	配布規定を GPL に準拠するようにした.
	README.DOC 修正. 今回の改良で残った不具合を仕様に変更.
	dis_option.1 修正. -s の解説を変更、-P 削除.
	tablefile.5 追加.


version 2.82
-a--rw-   116442 1998-05-14 21:09:40 dis.x

	解析関係:

	-v オプションを指定するとバスエラーが発生する不具合を修正.

	ソースコード関係:

	eprintf() の返値を void から int に変更.


version 2.81
-a--rw-   117732 1998-03-22 06:11:46 dis.x

	オプション関係:

	-Y オプションを新設. 指定した場合は、最初にカレントディレクトリ
	からインクルードファイルを検索する.


	入力ファイル関係:

	識別子 READ_FEFUNC_H を定義してコンパイルすれば、fefunc.mac では
	なく fefunc.h を読み込むようにした.

	インクルードファイルに定義されたシンボル名によっては、認識されな
	いことがある不具合を修正.


	出力ファイル関係:

	デバイスヘッダに参照されないラベルが出力される不具合を修正.


	その他:

	識別子 QUICK_YES_NO を定義してコンパイルすれば、上書き確認を
	version 2.79 互換('y'のみで決定)になるようにした.

	ドキュメント修正.


version 2.80
-a--rw-   117758 1998-02-11 02:38:22 dis.x

	サポートの引き継ぎに伴ない、patchlevel ではなく version で管理す
	るようにした.


	出力ファイル関係:

	ラベル/テーブルファイル名を省略した場合に、入力ファイル名から補
	完するようになってしまっていたエンバグを修正.

	fpconv_[sdx]()で±0.0を特別扱いして最初に処理するようにした(これ
	により拡張精度で+0.0が内部表現で出力される不具合を修正).
	拡張精度を内部表現で出力する閾値を大きくした.


	その他:

	タイトル行に作成年月日を表示するようにした.
	READMEを削除し、全体のマニュアルとしてREADME.DOCを書き下した.
	doscall.mac/iocscall.mac/fefunc.macも添付するようにした.


・備考

　version 2.80 以降は version 2.79 をベースにしています. それ以前の
version 2.78 patchlevel 1〜5 のベースは version 2.78ですが、これは私が
version 2.79 が存在していることを知らなかった為です.
　version 2.78 patchlevel 1〜5 は version 2.79 と version 2.80 のあいだ
のあたりに位置します.


version 2.78 patchlevel 5
-a--rw-   117576 1997-11-29 00:08:30 dis.x

	入力ファイル関係:

	インクルードファイルの疑似命令(equ/macro)が大文字だと認識出来な
	くなっていたエンバグを修正.
	定義が一つもなかった場合のエラーメッセージがおかしかった不具合を
	修正. 一つもなくてもエラー終了しないようにした.
	fefunc.dis/fefunc.hではなくfefunc.macを読み込むようにした.
	-u1が指定されていなければ$sx_macを読み込まないようにした.


	出力ファイル関係:

	move16の絶対ロングアドレッシングに()が付かない不具合及び、--old-syntax
	を指定するとハングアップする不具合を修正.

	link命令のエリア長を16進数で出力するようにした.


	解析関係:

	andi/ori/eori to ccrがワードサイズと見なされていた不具合を修正.


	その他:

	READMEに導入の項を加筆.
	dis_option.1に環境変数の項を加筆.

	非LIBC環境でコマンドラインの出力が正しくない不具合を修正.
	err()は必ず終了コード1でエラー終了するようにし、引数から終了コー
	ドの指定を削除.
	*_mac_pathをchar []ではなくchar*に変更.


	ソースコード関係:

	いくつかの魔法の数字を#defineで定義するようにした.
	include.cを大幅に改変.
	MakefileのLDFLAGSをLIBFLAGSに変更し、LDFLAGS = -Wl,-xを設定.
	ほか若干の修正.


version 2.78 patchlevel 4
-a--rw-   118232 1997-11-13 03:07:00 dis.x

	オプション関係:

	数値の指定がおかしくないか調べるようにした.
	-U指定時は-Xも自動的に指定されるようにした.
	シンボルバッファ数のデフォルトを2048に変更.

	--real/--inrealオプションを新設した. デフォルトは--real.

	--old-syntax/--new-syntaxオプションを新設した. アドレッシング
	表記を旧形式/新形式で出力する. デフォルトは--new-syntax.

	-m680*0オプションに複数のMPUを指定できるようにした.
	-m680x0で対応している全てのMPUの同時指定となる.
	-m6888*、-m68851は-m680*0で打ち消されるようになったので注意.

	.dcbで出力する最小バイト数を指定するオプション-W numを作成.


	入力ファイル関係:

	テーブルの記述でext.wa()などがエラーにならない不具合を修正.
	テーブルの記述でdc.bなどを.dc.bと記述しても受け付けるようにした.

	実行ファイルの読み込み時にエラーチェックを行なうようにした.


	出力ファイル関係:

	LIBC版でコマンドラインを内部変数_comlineから得るようにした.
	-v指定時に--spが無視される不具合を修正.
	-U指定時にSXCALLのコール名が大文字になってしまう不具合を修正.
	-r指定時に文字列の16進数コメントの文字が変更できなかった不具合を修正.

	OSK版で(d16,an)の出力が旧表記のままだった不具合を修正.
	quadサイズの即値が正しく出力できない不具合を修正.
	(d32.l,an,ix)のアドレッシングでbdがアドレス依存していなくてもラベル
	に置換されてしまう不具合を修正.
	一部の未定義命令でオペランドがラベルに置換されてしまう不具合を修正.
	データブロックの出力中に-aのアドレス表示が更新されない不具合を修正.
	cpush/cinv命令でアドレスレジスタ番号が正しく出力されない不具合を修正.

	「bra @f; .ds.b 126; @@:」のbraにはサイズを付けないようにした.
	サプレスされたアドレスレジスタは出力しないようにした.
	(0,an,ix)は(an,ix)として出力するようにした.
	$8000〜$ffffの絶対ショートアドレッシングは(-d16)として出力するようにした.
	サイズ".w"は不要になったので削除.

	ラベルファイルを64ビット整数及び浮動小数点データに対応させた.

	拡張精度/パックドデシマル型式浮動小数点の実数表記出力に対応.
	ただし完全ではない.


	解析関係:

	複数のMPU命令を同時に受け付けるマルチMPUモードに対応.
	「-m68030,68040」などとして指定する.

	浮動小数点命令のデフォルトサイズを.wから.xに修正.
	fmove/fmovem from/to fpcr命令のデフォルトサイズを.lに修正.

	PDBcc、FBcc、PBcc、TRAPcc、FTRAPcc、PTRAPccのサイズ出力/抑制が
	指定通りに行われなかった不具合を修正.

	-m68020で movec cacrが逆アセンブル出来なくなっていた不具合を修正.
	-m68010でrtdが逆アセンブル出来ない不具合を修正.
	pmove crp,a0などを出力してしまう不具合を修正.
	pflush命令の即値のエラーチェック/出力が正しく行われていなかった
	不具合を修正.

	長い命令の先頭の一部だけが実行ファイルの末尾に存在した場合、
	ファイル末尾を超えてデータを読んでしまう不具合を修正.

	OSK版でも68020以降の新設命令を出力可能にした.


	ライブラリ関係:

	libbinioのリンクをやめ、LIBCに対するパッチで対処するようにした.
	これにより端末への出力はCRLF改行で、それ以外はLF改行で行われる.
	libioctlと同じように、dis自身は全く関与せずに実現してます:-)

	同梱の実行ファイルは改造したlibgccをリンクしています.
	いくつかの不具合を修正しましたが、エンバグしているかも知れません.

	LIBC/libhdiを改造してlong double対応の_doprnt()を作成した.


	その他:

	テーブルファイル解析中に、alloca()で確保したメモリをfree()で解放
	しようとしていた不具合を修正.
	SXCALLのコール名ポインタ配列は必要な時だけ確保するようにした.
	ファイル名バッファを静的配列ではなくmalloc()で確保するようにした.

	メッセージ修正.


	ソースコード関係:

	浮動小数点の変換を扱うfpconv.[ch]を作成.
	ヘッダファイルが#includeする順番に依存していたのを修正.

	int MPU_typeをmputypes MPU_typesに変更.
	main.c:short FPCP_ID[16]をdisasm.c:char FPUID_table[16]に変更.


version 2.78 patchlevel 3
-a--rw-   113162 1997-09-02 02:18:26 dis.x

	出力ファイル関係:

	$dis_headerのファイルに'%'が含まれていた場合に正しく出力できなかった
	不具合を修正.
	定数シンボルの再現がおかしくなっていた不具合を修正.
	浮動小数点のNaN、無限大が文字列として出力されてしまっていたので、内部
	表現で出力するように修正.
	実効アドレス表記(abs.[wl])を(abs).[wl]に修正.
	ビットフィールド命令のオペランドが出力されなくなっていた不具合を修正.

	-S指定時に付加する拡張子を小文字にした.
	シンボル名の多重定義に対応. これに伴いラベルファイルの形式を拡張.
	.dc.?はゼロサプレスせずに出力するように変更. ただし最小単位のデータ
	はサプレスされる.
	.dc.w及び.dc.lも.dcb.?に変換されるようにした.
	.dcb.? len,$00は.ds.? lenとして出力するようにした.


	解析関係:

	-m68000指定時にビットフィールド命令が.w (an)と出力されるversion 2.78
	からの不具合を修正.

	命令中のアドレス依存検査を正しく書き直した.
	ラベルファイルの出力より先にラベルチェックを行うように変更.


	表示関係:

	"bindコマンド等"→"unbindコマンド等".
	バージョンから"(Eriko ver.)"を削除.


	オプション関係:

	-Sを指定すると-Tも指定されてしまっていた不具合を修正.
	-m68008を認識しないようにした.


	ソースコード関係:

	etc.cにLIBC互換のeprintf()を作成(LIBCがあるならLIBCのものを使用).
	可変長引数を受け取る関数はstdarg.hを参照して正しく宣言するようにした.
	nearadrs()のバイナリサーチの条件式がおかしかったのを修正.
	なるべくsetDn()を使うようにした.
	関数の定義を新しい形式に書き換えた.
	staticな関数はファイル先頭で定義してプロトタイプ宣言を削除した.
	小さい関数、一度しか呼ばれない関数はinline関数にした.
	その他いろいろ.


version 2.78 patchlevel 2
-a--rw-   113046 1997-08-07 07:12:36 dis.x

	68060対応:

	未実装整数・浮動小数点命令をsoftware emulationとして認識します.
	新設命令lpstop、plpar、plpawに対応.
	新設制御レジスタbuscr、pcrに対応.


	表示関係:

	Target MPU、MMU、FPCPの表示を変更した.


	オプション関係:

	命令セットを変更するオプションを作成.
		-P num		software emulation命令を有効にする.
				-R numと同じように指定する.
			+1	未実装浮動小数点命令を有効にする.
			+2	未実装整数命令を有効にする.
				デフォルトは3.
		--fpsp		FPSP命令を有効にする(68040/68060).
		--no-fpsp	〃	  無効にする.
		--isp		ISP命令を有効にする(68060のみ).
		--no-isp	〃	 無効にする.
		--no-fpu	FPU命令を無効にする.
				(-m68030〜68060では-m6888xを指定しなくても
				FPU命令が有効になってしまうので、その対策)
		--no-mmu	MMU命令を無効にする.
				(-m68030〜68060では-m68851を指定しなくても
				MMU命令が有効になってしまうので、その対策)

		--no-fpuと--no-mmuは-m680x0のあとに指定すること.
		それ以外は-Pと同じように使用可.
		--(no-)fpspと--(no-)ispはもう片方の設定は変更しない.
		例)-P0 --fpspで浮動小数点命令のみ有効.

	# 68060専用のプログラムだがFPU/MMU命令は使ってないことが分っていて、
	# データ領域との判別をより正確にしたい場合などは -m68060 --no-fpu
	# --no-mmu と指定すればよい.


	出力ファイル関係:

	拡張精度及びパックドデシマル形式の即値が0サプレスされるバグを修正.
	FPU IDに1以外が指定された場合は.fpidを出力するようにした.

	複数即値オペランドのfmovem.l #imm,#imm[,#imm],fpcrlistが正常に逆
	アセンブルできなかったのを修正.

	-U指定時に.include .cpu .fpid .equが大文字にならないのを修正.

	movepのディスプレースメントに".w"が付いていたが、これは不要なので
	付かないようにした.

	ラベルファイルにシンボル名を追加すると、そのラベルが必ず外部定義に
	なってしまうのを修正.

	一部の実効アドレス形式で--spが効かなくなっていたのを修正.


	解析関係:

	「データ領域の中からプログラム領域を捜しています(1).」や「ラベル
	チェック中.」で無限ループに陥る不都合を修正(AVL_delete()のバグ).

	シンボルテーブルやラベルファイルでシンボル名が無視されるようになって
	いた不都合を修正.

	-g指定時もシンボルテーブルを読み込むようにした.

	ワードサイズの再配置情報を通常のロングロードサイズと同等に扱うようにした.


	ソースコード関係:

	fprintf(stderr,...)をeprintf(...)に変更.
	fputc(c,stderr)をetc.cに作成したeputc(c)に変更.
	fputc()の第一引数をcharにcastしていたのをやめた.

	パーサジェネレータを自分で移植したGNU Bison version 1.25に変更.

	add_symbol()で行っていた定数シンボル登録の振り分けをmake_symtable()
	で行うようにした.

	ラベル行とオペランド中のラベルの生成ルーチンを独立させた.
	make_symbol()の第三引数(コロン付加モード)を削除.


	ライブラリ関係:

	avl.c: AVL_delete()で節を削除すると子が迷子になるバグを修正.

	option.c: XCの独自関数strbpl()を使わないようにした.


version 2.78 patchlevel 1
-a--rw-   118978 1997-06-29 00:50:46 dis.x

	表示関係:

	Target FPCPの表示形式を若干変更した.
	Target MPU/FPCPの表示から'MC68***'の'MC'を削除した.
	-m68851、-m68030、-m68040指定時はTarget MMUとして表示するようにした.


	オプション関係:

	コマンドラインより先に環境変数dis_optを評価するようにした.
	これにより-Q削除(ただし互換性の為、指定されても無視する).

	-Cオプションの初期値を-C0から-C2に変更した.
	-mオプションの初期値を-m68030から-m68000に変更した.

	バージョンを表示するオプション--versionを作成した.
	使用法を表示するオプション--helpを作成した.
	なお、-?はgetoptの仕様上エラーになる.


	入力ファイル関係:

	Ｘ形式実行ファイルのヘッダ確認は、先頭2バイトが'HU'かどうかで
	行うようにした(次の1バイトは予約領域、その次の1バイトはロードモード).

	64バイト未満の不当なＸ形式実行ファイルがエラーにならないで異常な
	ソースを生成してしまう不都合を修正した.

	テキストデータとして読み込むファイル(label、table、include、headerの四種)
	は明示的にテキストモードでオプションするようにした.

	include fileのマクロ/定数名に':'が付いていても認識するように修正.


	出力ファイル関係:

	-vオプションによる出力で"undefined inst."の後にゴミが付く不都合を修正した.

	.cpu疑似命令や定数の外部定義リストの直後の空行が二行になるように修正した.
	残っていた旧アドレッシング表記を新表記に改めた.

	単精度浮動小数点小数がラベルに変換されてしまう不都合を修正した.
	浮動小数点小数の先頭に"0f"を付けるようにした.

	上書き確認はfgets()で"yes"の入力を待つように変更した. それ以外の文字列が
	入力された場合(空文字列も含む)は"no"とみなし中断する.

	libbioio.aをリンクした関係上、常にLF改行で出力されるようになった.


	解析関係:

	最初のシンボル登録時に不当なアドレスを参照する不都合を修正した.
	SCSIDRV.SYSに-dオプションを付けるとバスエラーになる不都合を修正した.

	10進数テーブルが文字列";毀"にならないようにした. 但し.dc.lにはならない.

	-m68020 -m68851指定時に以下のMMU命令が逆アセンブル出来ない不都合を修正.
		レジスタtcを使用した命令
		pmove (d16,pc),mmureg


	ソースコード関係:

	avlライブラリを../avlから./avlに移動した.
	ソースファイルの改行コードをLFにし、TAB幅を8桁に変更した.
	option.cの不正なコメントを修正、analyze2.cのコメント中の"/*"を削除.

	labelchange()の返値は使用しないようになっていたのでvoid型にした.
	hex.hで宣言されている関数のプロトタイプがhex.cで定義されている実体と
	違っていたのを修正.
	option.hから存在しないhelp()のプロトタイプを削除.


	ライブラリ関係:

	-DLIBCを不要にした.
	strncmpi()はlibcのstrnicmp()を使うように変更.
	libhdi.a、libhmem.a、libbinio.aをリンクするようにした.


────────────────────────────────────
